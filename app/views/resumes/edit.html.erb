<div id="content" data-controller="resume">
  <section class="relative flex justify-between w-full pl-16">
    <div class="max-w-screen-lg p-16 mt-20 mb-16 bg-white shadow-2xl min-h-1000" data-controller="pdfGenerate" data-pdfGenerate-target="pdfContent">
      <%= form_with(url: update_resume_path(account: current_user.account, id: @resume.id), method: "patch", model: @resume, data: { turbo: false }) do |f| %>
        <%= f.submit "更新", name: "save", class: "absolute top-4 right-56 inline-block px-5 py-3 mx-auto text-center text-white rounded-lg cursor-pointer bg-amber-500 hover:bg-amber-800" %>
        <%= f.submit "發佈", name: "published", class: "absolute top-4 right-80 inline-block px-5 py-3 mx-auto text-center text-white rounded-lg cursor-pointer bg-amber-500 hover:bg-amber-800" %>
        <%= hidden_field_tag :publish, @resume.publish %>
        <div class="flex items-end min-h-min">
          <div class="flex flex-col text-center">
            <div class="flex items-center justify-center inline-block pb-5 custom-width-250px">
              <%= image_tag "defaultuser.png", class: "inline-block w-32 h-32 rounded-full" %>
            </div>
            <div class="flex items-center justify-center inline-block w-60">
              <div data-resume-target="basicInfo" data-action="click->resume#showBasicInfoForm" class="text-lg font-semibold text-center cursor-pointer"><%= simple_format("#{@resume.basic_info}") %></div>
              <%= f.text_area :basic_info,
                class: "hidden border-0 w-full h-20 p-2 border rounded-md resize-y h-20",
                data: {
                  resume_target: "basicInfoForm"
                } %>
            </div>
            <div class="">
              <h1 class="mt-1 text-lg font-bold">語言</h1>
              <ul class="relative">
                <% if @resume.languages.present? %>
                  <% @languages.each do |language, level| %>
                    <li class="inline-blockrounded-lg"><%= language %>▪️<%= level %></li>
                  <% end %>
                <% else %>
                  <li class="inline-block rounded-lg">-請輸入語言</li>
                <% end %>
              </ul>
            </div>
            <div class="">
              <h1 class="text-lg font-bold ">技能</h1>
              <ul class="relative">
                <% if @skills.present? %>
                  <% @skills.each do |skill| %>
                    <li class="inline-blockrounded-lg"><%= skill %></li>
                  <% end %>
                <% else %>
                  <li class="inline-block rounded-lg">-請輸入技能</li>
                <% end %>
              </ul>
            </div>
          </div>
          <div class="flex-grow">
            <div data-resume-target="aboutMe" data-action="click->resume#showAboutMeForm" class="cursor-pointer"><%= simple_format("#{@resume.about_me}") %></div>
            <%= f.text_area :about_me,
              class: "hidden h-full border-0 w-full h-20 p-2 border rounded-md resize-y",
              data: {
                resume_target: "aboutMeForm",
                action: "input->inputAboutMeTextareaHeight"
              } %>
          </div>
        </div>
        <div class="mt-10">
          <div>
            <h1 class="mb-3 text-lg font-bold cursor-pointer" data-resume-target="workExperienceTitle" data-action="click->resume#showWorkExperienceTitleInput"><%= @resume.work_experience_title %></h1>
            <%= f.text_field :work_experience_title,
                class: "hidden my-2 w-full h-10 h-20 p-2 rounded-md resize-y",
                data: {
                  resume_target: 'workExperienceTitleInput'
                } %>
          </div>
          <div class=" grid grid-col-2">
            <div>
              <h2 class="py-3 text-xl font-bold">工作經驗</h2>
              <%= @profile.work_experience%> - <%= @profile.work_exp_date%>
            </div>
            <div>
              <h2 class="py-3 text-xl font-bold">簡述</h2>
              <p id="work_state" class="w-1/2"></p>
            </div>
          </div>
          <div>
            <div class="pb-3 mt-10">
              <h1 class="text-lg font-bold cursor-pointer" data-resume-target="projectTitle" data-action="click->resume#showProjectTitleInput"><%= @resume.project_title %></h1>
              <%= f.text_field :project_title,
                class: "hidden my-2 border-0 w-full h-10 h-20 p-2 border rounded-md resize-y",
                data: {
                  resume_target: 'projectTitleInput',
                } %>
            </div>
            <div class="flex pb-14 h-60">
              <%= image_tag "pdf-project.jpg" %>
              <div class="w-1/2 pt-5l">
                <div data-action="click->resume#showProjectForm" data-resume-target="project" class="h-full pl-2 cursor-pointer"><%= simple_format("#{@resume.project}") %></div>
                <%= f.text_area :project,
                  class: "hidden border-0 w-full h-full h-20 p-2 border rounded-md resize-y",
                  data: {
                    resume_target: 'projectForm'
                  } %>
              </div>
            </div>
          </div>
          <div>
            <h2 class="py-3 text-xl font-bold">作品集</h2>
            <div id="protofolio"></div>
          </div>
        </div>
        <div>
          <div>
            <h1 class="text-lg font-bold cursor-pointer" data-resume-target="educationTitle" data-action="click->resume#showEducationTitleInput"><%= @resume.education_title %></h1>
            <%= f.text_field :education_title,
                class: "hidden my-2 border-0 w-full h-10 h-20 p-2 border rounded-md resize-y",
                data: {
                  resume_target: 'educationTitleInput',
                } %>
          </div>
          <div>
            <div data-action="click->resume#showEducationForm" data-resume-target="education" class="cursor-pointer"><%= simple_format("#{@resume.education}") %></div>
            <%= f.text_area :education,
                class: "hidden border-0 w-full h-20 p-2 border rounded-md resize-y",
                data: {
                  resume_target: 'educationForm'
                } %>
          </div>
        </div>
      <% end %>
    </div>
  </section>
  <div class="fixed bottom-0 right-0 bg-gray-200 top-68px">
    <div class="flex-col justify-between h-full overflow-y-scroll align-center">
      <button id="generatePdfBtn" class="inline-block px-5 py-3 mx-auto text-center text-white rounded-lg cursor-pointer bg-amber-500 hover:bg-amber-800" data-action="pdfGenerate#generate">下載 PDF</button>
      <div class="px-10 pt-10 custom-width-250px">
        <p>組件一</p>
        <p>組件二</p>
        <p>組件三</p>
        <p>組件四</p>
      </div>
    </div>
  </div>
</div>
